// Who: Développeur backend
// What: Règles de sécurité Firestore
// When: Appliquées à chaque requête DB
// Where: Firebase Console > Firestore > Rules
// Why: Sécuriser l'accès aux données
// Which: Lecture publique, écriture admin uniquement
// How: Rules language Firebase

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Who: Utilisateur public
    // What: Règles pour collection 'apis'
    // When: Lecture autorisée, écriture interdite
    // Where: Collection /apis/{apiId}
    // Why: Données publiques en lecture seule
    // Which: Tous les documents de la collection
    // How: allow read si vrai, allow write si authentifié
    match /apis/{apiId} {
      allow read: if true; // Lecture publique
      allow write: if request.auth != null; // Écriture admin uniquement
    }
  }
}
